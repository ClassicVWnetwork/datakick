const request=require("request"),querystring=require("querystring"),fs=require("fs"),host="https://www.datakick.org",version="1";function item(a){return new Promise((b,c)=>a?request(`${host}/api/items/${a}?version=${version}`,(a,d,e)=>a?c(a):b(JSON.parse(e))):c(new ReferenceError("No GTIN or EAN specified")))}function update(a,b){return new Promise((c,d)=>a?b?request.put({url:`${host}/api/items/${a}?version=${version}`,form:b},(a,b,e)=>a?d(a):c(JSON.parse(e))):d(new ReferenceError("No fields to update specified")):d(new ReferenceError("No GTIN or EAN specified")))}function add(a,b){return new Promise((c,d)=>a?b?item(a).then(e=>{"undefined"==typeof e.message?d(new Error("The item does already exist!")):request.put({url:`${host}/api/items/${a}?version=${version}`,form:b},(a,b,e)=>a?d(a):c(JSON.parse(e)))}):d(new ReferenceError("No fields to add specified")):d(new ReferenceError("No GTIN or EAN specified")))}function list(){return new Promise((a,b)=>{request(`${host}/api/items/?version=${version}`,(c,d,e)=>c?b(c):a(JSON.parse(e)))})}function page(a){return new Promise((b,c)=>a?request(`${host}/api/items/?page=${a}&version=${version}`,(a,d,e)=>a?c(a):b(JSON.parse(e))):c(new ReferenceError("No page specified")))}function query(a){return new Promise((b,c)=>{if(!a)return c(new ReferenceError("No query specified"));const d=querystring.stringify({query:a,version});return request(`${host}/api/items/?${d}`,(a,d,e)=>a?c(a):b(JSON.parse(e)))})}function image(a,b){return new Promise((c,d)=>fs.existsSync(b)?request.post({url:`${host}/api/items/${a}/images/?version=${version}`,headers:{"Content-Type":"multipart/form-data"},formData:{image:fs.createReadStream(b)}},(a,b,e)=>a?d(a):c(JSON.parse(e))):d(new Error("The image does not exist!")))}exports.item=item,exports.update=update,exports.add=add,exports.list=list,exports.page=page,exports.query=query,exports.image=image;